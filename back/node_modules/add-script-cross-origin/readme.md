# add-script-cross-origin

> 为 nej 打包后的 script 标签 加入 crossorigin 属性

## 安装
```
$ npm i -D add-script-cross-origin
```

## 启用
1. `package.json`， 中新增 `addScriptCrossOrigin` scripts
```json
{
  "dependencies": {
      "add-script-cross-origin": "1.0.0" 
  },
  "scripts": {
    "addScriptCrossOrigin": "node ./add-script-cross-origin.js",
    "nejbuildtest": "node --max-old-space-size=4096 \"node_modules/nej/bin/build.js\" \"release_test.conf\" && npm run addScriptCrossOrigin",
    "nejbuildpre": "node --max-old-space-size=4096 \"node_modules/nej/bin/build.js\" \"release_pre.conf\" && npm run addScriptCrossOrigin",
    "nejbuildprod": "node --max-old-space-size=4096 \"node_modules/nej/bin/build.js\" \"release.conf\" && npm run addScriptCrossOrigin",
  }
}
```

2. 新建 `add-script-cross-origin.js` 文件
```js
var addScriptCrossOrigin = require('add-script-cross-origin');
var path = require('path');

addScriptCrossOrigin({
    pattern: path.resolve(__dirname, '../../webapp/WEB-INF/tpl/**/**.ftl')
})
    .then(function() {
        console.log('addScriptCrossOrigin success');
    })
    .catch(function(e) {
        console.error('failed:');
        console.error(e.stack || e);
        process.exit(1);
    });
```
## 参数说明
* pattern - glob 模式的文件匹配符，例如 `./dest/**/**.ftl`

## License

MIT